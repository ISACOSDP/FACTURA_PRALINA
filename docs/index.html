<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Factura PRALINA</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 1em; background: #f6f6f9; }
        h2 { color: #333366; text-align: center; }
        .section { background: #fff; padding: 1em; border-radius: 8px; box-shadow: 0 2px 8px #00000009; margin-bottom: 1.5em; }
        .field { font-size: 14px; margin-bottom: 0.5em; }
        .label { font-weight: bold; color: #555; }
        table { width: 100%; border-collapse: collapse; margin-top: 1em; font-size: 14px; }
        th, td { padding: 0.5em; border: 1px solid #ccc; text-align: left; }
        th { background: #efefef; }
        .totales { font-size: 16px; font-weight: bold; text-align: right; margin-top: 1em; }
    </style>
</head>
<body>

    <h2>FACTURA PRALINA</h2>

    <div class="section">
        <div class="field"><span class="label">Factura NÂ°:</span> <span id="factura"></span></div>
        <div class="field"><span class="label">Cliente:</span> <span id="cliente"></span></div>
        <div class="field"><span class="label">Fecha:</span> <span id="fecha"></span></div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Cant.</th>
                <th>Producto</th>
                <th>Precio Unitario</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody id="detalle"></tbody>
    </table>

    <div class="totales">
        <p>Total: $<span id="total"></span></p>
        <p>Abonado: $<span id="abonado"></span></p>
        <p>Saldo: $<span id="saldo"></span></p>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        document.getElementById("factura").innerText = urlParams.get("factura") || "N/A";
        document.getElementById("cliente").innerText = urlParams.get("cliente") || "N/A";
        document.getElementById("fecha").innerText = urlParams.get("fecha") || "N/A";
        document.getElementById("total").innerText = urlParams.get("total") || "0.00";
        document.getElementById("abonado").innerText = urlParams.get("abonado") || "0.00";
        document.getElementById("saldo").innerText = urlParams.get("saldo") || "0.00";

        function populateTable(elementId, cantidades, productos, precios) {
            let tableBody = document.getElementById(elementId);
            let cantidadesArray = cantidades ? cantidades.split(",").map(i => i.trim()) : [];
            let productosArray = productos ? productos.split(",").map(i => i.trim()) : [];
            let preciosArray = precios ? precios.split(",").map(i => i.trim()) : [];

            tableBody.innerHTML = "";
            for (let i = 0; i < cantidadesArray.length; i++) {
                let total = (parseFloat(cantidadesArray[i]) * parseFloat(preciosArray[i])).toFixed(2);
                let row = document.createElement("tr");
                row.innerHTML = `
                    <td>${cantidadesArray[i]}</td>
                    <td>${productosArray[i]}</td>
                    <td>$${preciosArray[i]}</td>
                    <td>$${total}</td>
                `;
                tableBody.appendChild(row);
            }
        }

        populateTable(
            "detalle",
            urlParams.get("cantidades"),
            urlParams.get("productos"),
            urlParams.get("precios")
        );
    </script>

</body>
</html>
